# الفندق الاجتماعي – سجل وإحصاءات
**اللغات: [الفرنسية](README.md) | [الإنجليزية](README.en.md) | [العربية](README.ar.md)**

تطبيق ويب خفيف لإدارة العائلات المقيمة في فندق اجتماعي وتحليل السكان المستضافين. صُمم باستخدام **Flask** و**SQLite** و**Bootstrap** و**Chart.js**.

الهدف هو تقديم تجربة مريحة بالاعتناء بكل من **الواجهة** و**البيانات**. توفر الرسوم البيانية التفاعلية والجداول المتجاوبة والسمات القابلة للتخصيص عرضًا واضحًا، بينما تضمن قاعدة البيانات محتوىً موثوقًا وكاملاً.

أحدث التحديثات توفر **صفحة إعدادات شاملة** (الغرف، التنبيهات، المخطط التفاعلي) وإدخال أرقام الهواتف للعائلات والأشخاص.

## المحتويات
- [الميزات](#-الميزات)
- [التثبيت](#-التثبيت)
- [الاستخدام](#-الاستخدام)
- [النسخ الاحتياطي والتصدير](#-النسخ-الاحتياطي-والتصدير)
- [الاستضافة](#-الاستضافة)
- [الترخيص](#-الترخيص)

## ✨ الميزات

### 🎨 العرض

- جداول قابلة للفرز والتصفية بفضل *DataTables*.
- رسوم بيانية تفاعلية باستخدام *Chart.js*.
- محدد سمة فاتحة/داكنة مع حفظ الإعداد.
- مخطط تفاعلي للغرف يوضح الإشغال والغرف المتاحة.
- محرر مخطط بالسحب والإفلات لرسم الطوابق.

### 📚 المحتوى والإحصاءات

- إدارة كاملة للعائلات والأشخاص (إضافة، تعديل، حذف).
- صفحة إعدادات لتحديد الغرف، حدود الإشغال والتنبيهات.
- لوحة تحكم تفاعلية:
  - إحصاءات عامة (الجنس، الفئات العمرية، البالغون/الأطفال),
  - عرض مخطط الغرف مع تفاصيل الإشغال,
  - تنبيهات تلقائية (زيادة الإشغال، نساء معزولات، أطفال أقل من سنة، غرف متاحة),
  - تذكير بأعياد الميلاد لليوم والأسابيع/الأشهر القادمة,
  - ترتيب أقدم/أحدث العائلات والبالغين والأطفال.
- بحث متعدد المعايير عن العائلات والأشخاص المقيمين.
- استعراض الأرشيف (عائلات/أشخاص غادروا) مع فلاتر.
- تصدير CSV للعائلات والأشخاص.
- نسخ احتياطي/استعادة للبيانات بصيغة JSON.
- حقول أرقام الهاتف للعائلات والأشخاص مع رقم غرفة ثانٍ للعائلات.

## 🛠️ التثبيت

1. استنساخ المستودع:

```bash
git clone https://example.com/hotel_stats.git
cd hotel_stats
```

2. (اختياري) إنشاء بيئة افتراضية:

```bash
python -m venv venv
source venv/bin/activate  # في ويندوز: venv\Scripts\activate
```

3. تثبيت الاعتمادات:

```bash
pip install -r requirements.txt
```

4. تشغيل التطبيق:

```bash
python app.py
```

الموقع متاح على [http://127.0.0.1:5000](http://127.0.0.1:5000).

## 💻 الاستخدام

- انتقل إلى لوحة التحكم لعرض الإحصاءات والتنبيهات وأعياد الميلاد.
- إدارة **العائلات** ثم **الأشخاص** عبر القائمة.
- استخدم صفحات **البحث** و**الأرشيف** لتصفية السجلات.
- الجداول قابلة للفرز والتصفية، وتقبل النماذج التواريخ والجنس لتغذية الإحصاءات.

## ⚙️ تهيئة الواجهة

تسمح صفحة **التهيئة** بتكييف التطبيق مع بنية الفندق الحقيقية. يمكن الوصول إليها من شريط التنقل، ويوجد في الأعلى زران لـ **تصدير** أو **استيراد** الإعدادات بصيغة JSON.

### علامة التبويب «الفندق»

#### التبويب الفرعي «الغرف»

- **العدد الإجمالي للغرف**: عدد الغرف التي يديرها التطبيق.
- **نوع الترقيم**: اختيار بين *رقمي*، *أبجدي* أو *مختلط*.
- **نطاقات الترقيم**: تحديد البداية والنهاية (مثل `1` إلى `20` أو `A` إلى `D`).
- **الغرف المستبعدة**: قائمة مفصولة بفواصل للغرف التي يجب تجاهلها (مثل `13,A1`).

#### التبويب الفرعي «الإشغال»

- **الحد الأقصى للإشغال الافتراضي**: السعة القياسية لكل غرفة.
- **مجموعات الغرف**: تعريف مجموعات تشترك في سعة معينة (مثال `1-5:3` يعني الغرف 1 إلى 5 بحد أقصى 3 أشخاص).
- **الإشغال لكل غرفة**: تحديد سعة خاصة لكل رقم غرفة إذا لزم الأمر.

### علامة التبويب «التنبيهات»

تفعيل أو تعطيل التذكيرات التلقائية المعروضة في لوحة التحكم:

- **الغرف المتاحة**: يبرز الغرف غير المشغولة.
- **زيادة الإشغال**: يشير إلى الغرف التي تجاوزت سعتها.
- **النساء المعزولات**: يكتشف النساء المقيمات دون بالغ آخر.
- **عمر الرضيع**: يطلق تنبيهًا للأطفال دون العمر المحدد.

### علامة التبويب «المخطط»

تُستخدم لرسم مخطط الفندق:

- **عرض/ارتفاع الخلايا** و**المسافة الأفقية/العمودية**: للتحكم في الشبكة.
- **لوحة العناصر**: اسحب العناصر (غرفة، درج، ...) لبناء كل طابق.
- **إدارة الطوابق**: إضافة مستويات متعددة وضبط التكبير لتحسين المخطط.

بعد الانتهاء، اضغط **حفظ** لتخزين الإعدادات.

## 💾 النسخ الاحتياطي والتصدير

- زر **تصدير** للحصول على ملف JSON يحتوي على جميع البيانات.
- صفحة **الاستعادة** لإعادة تحميل ملف تم حفظه سابقًا.
- حفظ/تحميل إعدادات الفندق من الواجهة.
- تصدير CSV للعائلات والأشخاص متاح من شريط التنقل.

## ☁️ الاستضافة

للإنتاج:

1. تعيين متغيرات البيئة:

```bash
export FLASK_ENV=production
export DATABASE_URL="sqlite:///hotel_social.db"  # أو أي نظام قواعد بيانات آخر
```

2. استخدام خادم WSGI مثل [Gunicorn](https://gunicorn.org/):

```bash
pip install gunicorn
gunicorn -w 4 app:app
```

3. وضع التطبيق خلف خادم HTTP (مثل Nginx أو Apache) وتكوين الوكيل العكسي.
4. تأمين قاعدة البيانات وإجراء نسخ احتياطية منتظمة.

## 📄 الترخيص

يتم توزيع هذا المشروع تحت ترخيص [MIT](LICENSE).

برمجة ممتعة! 🎉
