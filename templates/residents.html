{% extends 'base.html' %}
{% block title %}Résidents - Kardex Hôtel Social{% endblock %}
{% block content %}
<div class="card shadow-soft p-3">
  <div class="table-responsive">
    <table class="table table-striped table-hover table-sm align-middle sortable-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Sexe</th>
          <th>Âge</th>
          <th>Famille</th>
          <th>Chambre</th>
          <th>Arrivée</th>
        </tr>
      </thead>
      <tbody>
      {% for p in persons %}
        <tr>
          <td class="text-secondary">{{ p.id }}</td>
          <td class="fw-semibold">{{ p.last_name }}</td>
          <td>{{ p.first_name }}</td>
          <td>{{ p.sex or '' }}</td>
            <td data-order="{{ p.age_days }}">{{ p.age_text or '' }}</td>
          <td>{{ p.family_label or '' }}</td>
          <td data-order="{{ (p.room_number or 0)|int }}">{{ p.room_number or '' }}</td>
          <td data-order="{{ p.arrival_date.strftime('%Y-%m-%d') if p.arrival_date }}">
            {{ p.arrival_date.strftime('%d/%m/%Y') if p.arrival_date }}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

