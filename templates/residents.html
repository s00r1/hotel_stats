{% extends 'base.html' %}
{% block title %}Résidents - Kardex Hôtel Social{% endblock %}
{% block content %}
<div class="card shadow-soft p-3">
  <div class="table-responsive">
    <table id="personsTable" class="table table-striped table-hover table-sm align-middle">
      <thead>
        <tr>
          <th>#</th>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Sexe</th>
          <th>Âge</th>
          <th>Famille</th>
          <th>Chambre</th>
          <th>Arrivée</th>
        </tr>
      </thead>
      <tbody>
      {% for p in persons %}
        <tr>
          <td class="text-secondary">{{ p.id }}</td>
          <td class="fw-semibold">{{ p.last_name }}</td>
          <td>{{ p.first_name }}</td>
          <td>{{ p.sex or "—" }}</td>
          <td data-order="{{ p.age if p.age is not none else -1 }}">{{ p.age if p.age is not none else "—" }}</td>
          <td>{{ p.family_label or "—" }}</td>
          <td data-order="{{ p.room_number|int if p.room_number else '' }}">{{ p.room_number or "—" }}</td>
          <td data-order="{{ p.arrival_date.strftime('%Y-%m-%d') if p.arrival_date else '' }}">{{ fmt_date(p.arrival_date) or "—" }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

